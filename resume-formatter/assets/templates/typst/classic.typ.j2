// Classic Resume Template - Traditional, conservative design
// Black/white only, serif font, UPPERCASE section headers
// Most ATS-friendly template

#set page(
  paper: "a4",
  margin: 0.75in,
)

#set text(font: "New Computer Modern", size: 11pt)
#set par(justify: false, leading: 0.65em)

// Section header - uppercase with rule below
#let section(title) = {
  v(0.8em)
  text(weight: "bold", size: 12pt)[#upper(title)]
  v(-0.4em)
  line(length: 100%, stroke: 0.5pt)
  v(0.4em)
}

// ============================================================================
// HEADER
// ============================================================================

#align(center)[
  #text(size: 20pt, weight: "bold")[{{ contact.name | typst_escape }}]
  #v(0.2em)
  {% if contact.title %}
  {{ contact.title | typst_escape }}
  #v(0.2em)
  {% endif %}
  {% if contact.phone %}{{ contact.phone | typst_escape }} · {% endif %}
  {% if contact.email %}#link("mailto:{{ contact.email }}")[{{ contact.email | typst_escape }}]{% endif %}
  {% if contact.location %} · {{ contact.location | typst_escape }}{% endif %}
  #v(0.1em)
  {% if contact.linkedin or contact.github or contact.website %}
  {% if contact.linkedin %}#link("https://{{ contact.linkedin }}")[LinkedIn]{% endif %}
  {% if contact.github %}{% if contact.linkedin %} · {% endif %}#link("https://{{ contact.github }}")[GitHub]{% endif %}
  {% if contact.website %}{% if contact.linkedin or contact.github %} · {% endif %}#link("https://{{ contact.website }}")[Website]{% endif %}
  {% endif %}
]

#v(0.4em)

// ============================================================================
// PROFESSIONAL SUMMARY
// ============================================================================

{% if summary %}
#section("Professional Summary")
{{ summary | typst_escape }}
{% endif %}

// ============================================================================
// EXPERIENCE
// ============================================================================

{% if experience %}
#section("Professional Experience")
{% for job in experience %}
{% for position in job.positions %}
#grid(
  columns: (1fr, auto),
  text(weight: "bold")[{{ position.title | typst_escape }}],
  [{{ position.dates | typst_escape }}],
)
_{{ job.company | typst_escape }}_{% if job.location %}, {{ job.location | typst_escape }}{% endif %}
{% if position.achievements %}
#list(
  marker: [•],
  indent: 0em,
  body-indent: 0.5em,
  spacing: 0.3em,
  {% for achievement in position.achievements %}
  [{{ achievement | typst_escape }}],
  {% endfor %}
)
{% endif %}
#v(0.3em)
{% endfor %}
{% endfor %}
{% endif %}

// ============================================================================
// SKILLS
// ============================================================================

{% if skills %}
#section("Skills")
{% for category, skill_list in skills.items() %}
{% if skill_list is iterable and skill_list is not string %}
*{{ category | typst_escape }}:* {{ skill_list | join(', ') | typst_escape }} \
{% else %}
*{{ category | typst_escape }}:* {{ skill_list | typst_escape }} \
{% endif %}
{% endfor %}
{% endif %}

// ============================================================================
// EDUCATION
// ============================================================================

{% if education %}
#section("Education")
{% for edu in education %}
#grid(
  columns: (1fr, auto),
  text(weight: "bold")[{{ edu.degree | typst_escape }}],
  [{{ edu.graduation_year }}],
)
{{ edu.institution | typst_escape }}{% if edu.location %}, {{ edu.location | typst_escape }}{% endif %}{% if edu.gpa %} -- GPA: {{ edu.gpa | typst_escape }}{% endif %}{% if edu.honors %} ({{ edu.honors | typst_escape }}){% endif %}
{% if edu.minor %}\
Minor: {{ edu.minor | typst_escape }}{% endif %}
#v(0.3em)
{% endfor %}
{% endif %}

// ============================================================================
// CERTIFICATIONS
// ============================================================================

{% if certifications %}
#section("Certifications")
{% for cert in certifications %}
#grid(
  columns: (1fr, auto),
  [*{{ cert.name | typst_escape }}* -- {{ cert.issuer | typst_escape }}],
  [{{ cert.date | typst_escape }}],
)
{% if not loop.last %}#v(0.15em){% endif %}
{% endfor %}
{% endif %}

// ============================================================================
// PROJECTS
// ============================================================================

{% if projects %}
#section("Projects")
{% for project in projects %}
#grid(
  columns: (1fr, auto),
  text(weight: "bold")[{{ project.name | typst_escape }}],
  [{{ project.dates | typst_escape }}],
)
{% if project.description %}
{{ project.description | typst_escape }}
{% endif %}
{% if project.achievements %}
#list(
  marker: [•],
  indent: 0em,
  body-indent: 0.5em,
  spacing: 0.3em,
  {% for achievement in project.achievements %}
  [{{ achievement | typst_escape }}],
  {% endfor %}
)
{% endif %}
#v(0.3em)
{% endfor %}
{% endif %}

// ============================================================================
// PUBLICATIONS
// ============================================================================

{% if publications %}
#section("Publications")
{% for pub in publications %}
{{ pub.authors | typst_escape }}. "{{ pub.title | typst_escape }}." _{{ pub.venue | typst_escape }}_, {{ pub.date | typst_escape }}.
{% if not loop.last %}#v(0.3em){% endif %}
{% endfor %}
{% endif %}

// ============================================================================
// AWARDS
// ============================================================================

{% if awards %}
#section("Awards & Honors")
{% for award in awards %}
#grid(
  columns: (1fr, auto),
  [*{{ award.name | typst_escape }}* -- {{ award.issuer | typst_escape }}],
  [{{ award.date | typst_escape }}],
)
{% if award.description %}
{{ award.description | typst_escape }}
{% endif %}
{% if not loop.last %}#v(0.15em){% endif %}
{% endfor %}
{% endif %}
